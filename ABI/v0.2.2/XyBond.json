{
  "contractName": "XyBond",
  "abi": [
    {
      "constant": false,
      "inputs": [
        {
          "name": "account",
          "type": "address"
        }
      ],
      "name": "addGovernor",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "staking",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "bonds",
      "outputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "erc20",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "address"
        },
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "ownerBonds",
      "outputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "governablePeriod",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "bond",
      "outputs": [
        {
          "name": "value",
          "type": "uint256"
        },
        {
          "name": "expirationSec",
          "type": "uint256"
        },
        {
          "name": "creationSec",
          "type": "uint256"
        },
        {
          "name": "allocated",
          "type": "uint256"
        },
        {
          "name": "owner",
          "type": "address"
        },
        {
          "name": "interest",
          "type": "uint8"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "bondIndex",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "renounceGovernor",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "account",
          "type": "address"
        }
      ],
      "name": "isGovernor",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "name": "beneficiary",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "expiration",
          "type": "uint256"
        }
      ],
      "name": "BondDeposit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "name": "beneficiary",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "BondWithdraw",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "beneficiary",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "BondStake",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "stakingId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "BondUnstake",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "account",
          "type": "address"
        }
      ],
      "name": "GovernorAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "account",
          "type": "address"
        }
      ],
      "name": "GovernorRemoved",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_token",
          "type": "address"
        },
        {
          "name": "_stakingContract",
          "type": "address"
        },
        {
          "name": "_governablePeriod",
          "type": "uint256"
        }
      ],
      "name": "initialize",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "newPeriod",
          "type": "uint256"
        }
      ],
      "name": "setGovernablePeriod",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "xyoAmount",
          "type": "uint256"
        },
        {
          "name": "expirationDate",
          "type": "uint256"
        }
      ],
      "name": "createBond",
      "outputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_spender",
          "type": "address"
        },
        {
          "name": "_value",
          "type": "uint256"
        },
        {
          "name": "",
          "type": "address"
        },
        {
          "name": "_extraData",
          "type": "bytes"
        }
      ],
      "name": "receiveApproval",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "name": "to",
          "type": "address"
        }
      ],
      "name": "withdrawTo",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "name": "beneficiary",
          "type": "address"
        },
        {
          "name": "stakees",
          "type": "address[]"
        },
        {
          "name": "amounts",
          "type": "uint256[]"
        }
      ],
      "name": "stake",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "name": "beneficiary",
          "type": "address"
        },
        {
          "name": "stakees",
          "type": "address[]"
        },
        {
          "name": "amounts",
          "type": "uint256[]"
        }
      ],
      "name": "sendEthAndStake",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "bondId",
          "type": "bytes32"
        },
        {
          "name": "stakingId",
          "type": "bytes32"
        }
      ],
      "name": "unstake",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "bondId",
          "type": "bytes32"
        }
      ],
      "name": "isExpired",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "numBonds",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "numOwnerBonds",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50611e14806100206000396000f3fe608060405260043610610157576000357c010000000000000000000000000000000000000000000000000000000090048063785e9e86116100d85780638f4ffcb11161009c578063dcf3994511610076578063dcf3994514610665578063e026049c146107a1578063e43581b8146107b657610157565b80638f4ffcb114610575578063c3ab722314610611578063c472c4e01461063b57610157565b8063785e9e8614610479578063853394cf1461048e57806386015ff7146104c75780638862eadb146104f75780638b3ee9731461050c57610157565b8063586a80bf1161011f578063586a80bf146102835780635f1c17c0146102985780636db2feb2146102c257806373194f0214610300578063767e0e101461044957610157565b80631794bb3c1461015c5780632e331e6a146101a1578063378088a6146101da5780633c4a25d01461021f5780634cf088d914610252575b600080fd5b34801561016857600080fd5b5061019f6004803603606081101561017f57600080fd5b50600160a060020a038135811691602081013590911690604001356107e9565b005b3480156101ad57600080fd5b5061019f600480360360408110156101c457600080fd5b5080359060200135600160a060020a03166108d5565b3480156101e657600080fd5b5061020d600480360360208110156101fd57600080fd5b5035600160a060020a0316610b27565b60408051918252519081900360200190f35b34801561022b57600080fd5b5061019f6004803603602081101561024257600080fd5b5035600160a060020a0316610b42565b34801561025e57600080fd5b50610267610bad565b60408051600160a060020a039092168252519081900360200190f35b34801561028f57600080fd5b5061020d610bbc565b3480156102a457600080fd5b5061020d600480360360208110156102bb57600080fd5b5035610bc2565b3480156102ce57600080fd5b506102ec600480360360208110156102e557600080fd5b5035610be1565b604080519115158252519081900360200190f35b34801561030c57600080fd5b5061019f6004803603608081101561032357600080fd5b813591600160a060020a036020820135169181019060608101604082013564010000000081111561035357600080fd5b82018360208201111561036557600080fd5b8035906020019184602083028401116401000000008311171561038757600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156103d757600080fd5b8201836020820111156103e957600080fd5b8035906020019184602083028401116401000000008311171561040b57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550610bf8945050505050565b34801561045557600080fd5b5061019f6004803603604081101561046c57600080fd5b5080359060200135611052565b34801561048557600080fd5b506102676113e9565b34801561049a57600080fd5b5061020d600480360360408110156104b157600080fd5b50600160a060020a0381351690602001356113f8565b3480156104d357600080fd5b5061020d600480360360408110156104ea57600080fd5b5080359060200135611428565b34801561050357600080fd5b5061020d61143d565b34801561051857600080fd5b506105366004803603602081101561052f57600080fd5b5035611443565b604080519687526020870195909552858501939093526060850191909152600160a060020a0316608084015260ff1660a0830152519081900360c00190f35b34801561058157600080fd5b5061019f6004803603608081101561059857600080fd5b600160a060020a0382358116926020810135926040820135909216918101906080810160608201356401000000008111156105d257600080fd5b8201836020820111156105e457600080fd5b8035906020019184600183028401116401000000008311171561060657600080fd5b509092509050611498565b34801561061d57600080fd5b5061019f6004803603602081101561063457600080fd5b5035611537565b34801561064757600080fd5b5061020d6004803603602081101561065e57600080fd5b50356115f6565b61019f6004803603608081101561067b57600080fd5b813591600160a060020a03602082013516918101906060810160408201356401000000008111156106ab57600080fd5b8201836020820111156106bd57600080fd5b803590602001918460208302840111640100000000831117156106df57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929594936020810193503591505064010000000081111561072f57600080fd5b82018360208201111561074157600080fd5b8035906020019184602083028401116401000000008311171561076357600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550611608945050505050565b3480156107ad57600080fd5b5061019f61165a565b3480156107c257600080fd5b506102ec600480360360208110156107d957600080fd5b5035600160a060020a0316611665565b600154610100900460ff1680610802575061080261167d565b80610810575060015460ff16155b15156108505760405160e560020a62461bcd02815260040180806020018281038252602e815260200180611d4d602e913960400191505060405180910390fd5b6001805461010061ff00198216811760ff191683179092556034805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a03888116919091179092556035805490911691861691909117905560368390550460ff166108b8611683565b600180549115156101000261ff0019909216919091179055505050565b600082815260376020526040812080549091811161093d576040805160e560020a62461bcd02815260206004820152601160248201527f426f6e6420686173206e6f2076616c7565000000000000000000000000000000604482015290519081900360640190fd5b6000825560048201546003830154600160a060020a03909116331490156109985760405160e560020a62461bcd028152600401808060200182810382526021815260200180611dc86021913960400191505060405180910390fd5b8080610a0a57506040805160c0810182528454815260018501546020820152600285015491810191909152600384015460608201526004840154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a0820152610a0a9061168c565b1515610a60576040805160e560020a62461bcd02815260206004820181905260248201527f6f776e6572206f7220676f7665726e61626c652063616e207769746864726177604482015290519081900360640190fd5b8015610ac15760018301544211610ac1576040805160e560020a62461bcd02815260206004820152601460248201527f426f6e64206973207374696c6c20616374697665000000000000000000000000604482015290519081900360640190fd5b603454610ad890600160a060020a031685846116cc565b60408051868152600160a060020a038616602082015280820184905290517fc15103656f6b64cd545b27cff5200a514f316fafe20fdbecfb7369781fcd14359181900360600190a15050505050565b600160a060020a031660009081526039602052604090205490565b610b4b33611665565b1515610ba1576040805160e560020a62461bcd02815260206004820152601460248201527f4f6e6c7920476f7665726e6f7220416374696f6e000000000000000000000000604482015290519081900360640190fd5b610baa816117c3565b50565b603554600160a060020a031681565b603a5490565b603a805482908110610bd057fe5b600091825260209091200154905081565b600090815260376020526040902060010154421190565b60008481526037602052604090206004810154600160a060020a031633148080610c8857506040805160c0810182528354815260018401546020820152600284015491810191909152600383015460608201526004830154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a0820152610c889061168c565b1515610cde576040805160e560020a62461bcd02815260206004820152601d60248201527f6f776e6572206f7220676f7665726e61626c652063616e207374616b65000000604482015290519081900360640190fd5b6000805b8451811015610d1d57610d138582815181101515610cfc57fe5b60209081029091010151839063ffffffff61180b16565b9150600101610ce2565b506003830154610d33908263ffffffff61180b16565b6003840181905583541015610d92576040805160e560020a62461bcd02815260206004820152601960248201527f496e73756666696369656e7420626f6e642062616c616e636500000000000000604482015290519081900360640190fd5b6060878787876040516020018085815260200184600160a060020a0316600160a060020a031681526020018060200180602001838103835285818151815260200191508051906020019060200280838360005b83811015610dfd578181015183820152602001610de5565b50505050905001838103825284818151815260200191508051906020019060200280838360005b83811015610e3c578181015183820152602001610e24565b50505050905001965050505050505060405160208183030381529060405290506060600482604051602001808360ff16815260200180602001828103825283818151815260200191508051906020019080838360005b83811015610eaa578181015183820152602001610e92565b50505050905090810190601f168015610ed75780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152908290526034546035547fcae9ca51000000000000000000000000000000000000000000000000000000008452600160a060020a0390811660048501818152602486018d9052606060448701908152855160648801528551959b5092909316985063cae9ca51975095508a945088939192909160840190602085019080838360005b83811015610f7f578181015183820152602001610f67565b50505050905090810190601f168015610fac5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b158015610fcd57600080fd5b505af1158015610fe1573d6000803e3d6000fd5b505050506040513d6020811015610ff757600080fd5b5050604080518a8152336020820152600160a060020a038a16818301526060810185905290517f42e7044c4f07599463ab916896808dec08d53a4d63c09608065f9fa448d5ce829181900360800190a1505050505050505050565b603554604080517f1e23f2f9000000000000000000000000000000000000000000000000000000008152600481018490529051600092600160a060020a031691631e23f2f9916024808301926020929190829003018186803b1580156110b757600080fd5b505afa1580156110cb573d6000803e3d6000fd5b505050506040513d60208110156110e157600080fd5b5051905082811461113c576040805160e560020a62461bcd02815260206004820152601860248201527f5374616b65206e6565647320746f20626520626f6e6465640000000000000000604482015290519081900360640190fd5b603554604080517f5652c52f000000000000000000000000000000000000000000000000000000008152600481018590529051600092600160a060020a031691635652c52f9160248083019260e0929190829003018186803b1580156111a157600080fd5b505afa1580156111b5573d6000803e3d6000fd5b505050506040513d60e08110156111cb57600080fd5b50516000858152603760205260409020600481015491925090600160a060020a031633148061126057506040805160c0810182528254815260018301546020820152600283015491810191909152600382015460608201526004820154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a08201526112609061168c565b15156112b6576040805160e560020a62461bcd02815260206004820152601f60248201527f6f776e6572206f7220676f7665726e61626c652063616e20756e7374616b6500604482015290519081900360640190fd5b60038101548211156112fc5760405160e560020a62461bcd028152600401808060200182810382526023815260200180611d2a6023913960400191505060405180910390fd5b6003810154611311908363ffffffff61181816565b6003820155603554604080517fd78b37ed00000000000000000000000000000000000000000000000000000000815260048101889052602481018790529051600160a060020a039092169163d78b37ed9160448082019260009290919082900301818387803b15801561138357600080fd5b505af1158015611397573d6000803e3d6000fd5b5050604080518881523360208201528082018890526060810186905290517f687f705929669882a184d4123148de163cc23c02682e756263a0259955ea3e789350908190036080019150a15050505050565b603454600160a060020a031681565b60396020528160005260406000208181548110151561141357fe5b90600052602060002001600091509150505481565b60006114363333858561182a565b9392505050565b60365481565b6037602052600090815260409020805460018201546002830154600384015460049094015492939192909190600160a060020a0381169074010000000000000000000000000000000000000000900460ff1686565b603454600160a060020a031633146114fa576040805160e560020a62461bcd02815260206004820152601b60248201527f43616c6c2066726f6d207468652063757272656e7420746f6b656e0000000000604482015290519081900360640190fd5b6000808383604081101561150d57600080fd5b50600160a060020a03813516925060200135905061152d8783888461182a565b5050505050505050565b61154033611665565b1515611596576040805160e560020a62461bcd02815260206004820152601460248201527f4f6e6c7920476f7665726e6f7220416374696f6e000000000000000000000000604482015290519081900360640190fd5b6301e1338081106115f1576040805160e560020a62461bcd02815260206004820152601560248201527f4d61782031207965617220676f7665726e61626c650000000000000000000000604482015290519081900360640190fd5b603655565b60386020526000908152604090205481565b600034111561164857604051600160a060020a038416903480156108fc02916000818181858888f19350505050158015611646573d6000803e3d6000fd5b505b61165484848484610bf8565b50505050565b61166333611ab0565b565b6000611677818363ffffffff611af816565b92915050565b303b1590565b611663336117c3565b60008061169833611665565b905060006116b5603654856040015161180b90919063ffffffff16565b42111590508180156116c45750805b949350505050565b82600160a060020a031663a9059cbb83836040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050600060405180830381600087803b15801561174857600080fd5b505af115801561175c573d6000803e3d6000fd5b50505050611768611b2f565b15156117be576040805160e560020a62461bcd02815260206004820152600d60248201527f7472616e73666572206661696c00000000000000000000000000000000000000604482015290519081900360640190fd5b505050565b6117d460008263ffffffff611b6316565b604051600160a060020a038216907fdc5a48d79e2e147530ff63ecdbed5a5a66adb9d5cf339384d5d076da197c40b590600090a250565b8181018281101561167757fe5b60008282111561182457fe5b50900390565b600061184042633864090063ffffffff61180b16565b82106118805760405160e560020a62461bcd028152600401808060200182810382526021815260200180611d7b6021913960400191505060405180910390fd5b611893426202a30063ffffffff61180b16565b82116118d35760405160e560020a62461bcd02815260040180806020018281038252602c815260200180611d9c602c913960400191505060405180910390fd5b60408051600160a060020a03861660208083019190915281830186905260608201859052436080808401919091528351808403909101815260a09092019092528051910120611920611ce6565b506040805160c081018252858152602080820186815242838501908152600060608501818152600160a060020a03808d166080880181815260a08901858152603a80548d885260388b528c88205560378a528b87208b51815598516001808b0191909155975160028a015594516003890155905160049097018054915160ff16740100000000000000000000000000000000000000000274ff00000000000000000000000000000000000000001998851673ffffffffffffffffffffffffffffffffffffffff19909316929092179790971617909555938252603985529581208054808401825590825293812090930186905584549081018555939091527fa2999d817b6757290b50e8ecf3fa939673403dd35c97de392fdb343b4015ce9e9092018390556034549091611a579116883088611bb1565b60408051838152600160a060020a03881660208201528082018790526060810186905290517f3db8638351f2d0f91f71603c1096c8170b9c1af65d6d548492a3857ba71fd6f99181900360800190a15095945050505050565b611ac160008263ffffffff611c9a16565b604051600160a060020a038216907f1ebe834e73d60a5fec822c1e1727d34bc79f2ad977ed504581cc1822fe20fb5b90600090a250565b6000600160a060020a0382161515611b0f57600080fd5b50600160a060020a03166000908152602091909152604090205460ff1690565b6000803d8015611b465760208114611b4f57611b5b565b60019150611b5b565b60206000803e60005191505b501515905090565b600160a060020a0381161515611b7857600080fd5b611b828282611af8565b15611b8c57600080fd5b600160a060020a0316600090815260209190915260409020805460ff19166001179055565b604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a0385811660048301528481166024830152604482018490529151918616916323b872dd9160648082019260009290919082900301818387803b158015611c2457600080fd5b505af1158015611c38573d6000803e3d6000fd5b50505050611c44611b2f565b1515611654576040805160e560020a62461bcd02815260206004820152601160248201527f7472616e7366657246726f6d206661696c000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a0381161515611caf57600080fd5b611cb98282611af8565b1515611cc457600080fd5b600160a060020a0316600090815260209190915260409020805460ff19169055565b60c060405190810160405280600081526020016000815260200160008152602001600081526020016000600160a060020a03168152602001600060ff168152509056fe43616e6e6f7420756e7374616b65206f76657220626f6e6420616c6c6f636174696f6e436f6e747261637420696e7374616e63652068617320616c7265616479206265656e20696e697469616c697a6564457870697279206d757374206265206c657373207468616e203330207965617273457870697279206d757374206265206174206c656173742032206461797320696e2074686520667574757265426f6e64206d7573742068617665206e6f20616c6c6f6361746564207374616b65a165627a7a7230582045ea09a7acc8ac9b9b1f7ca89445fa9c28196e826dcd10017ed4f6fe19b14ee70029",
  "deployedBytecode": "0x608060405260043610610157576000357c010000000000000000000000000000000000000000000000000000000090048063785e9e86116100d85780638f4ffcb11161009c578063dcf3994511610076578063dcf3994514610665578063e026049c146107a1578063e43581b8146107b657610157565b80638f4ffcb114610575578063c3ab722314610611578063c472c4e01461063b57610157565b8063785e9e8614610479578063853394cf1461048e57806386015ff7146104c75780638862eadb146104f75780638b3ee9731461050c57610157565b8063586a80bf1161011f578063586a80bf146102835780635f1c17c0146102985780636db2feb2146102c257806373194f0214610300578063767e0e101461044957610157565b80631794bb3c1461015c5780632e331e6a146101a1578063378088a6146101da5780633c4a25d01461021f5780634cf088d914610252575b600080fd5b34801561016857600080fd5b5061019f6004803603606081101561017f57600080fd5b50600160a060020a038135811691602081013590911690604001356107e9565b005b3480156101ad57600080fd5b5061019f600480360360408110156101c457600080fd5b5080359060200135600160a060020a03166108d5565b3480156101e657600080fd5b5061020d600480360360208110156101fd57600080fd5b5035600160a060020a0316610b27565b60408051918252519081900360200190f35b34801561022b57600080fd5b5061019f6004803603602081101561024257600080fd5b5035600160a060020a0316610b42565b34801561025e57600080fd5b50610267610bad565b60408051600160a060020a039092168252519081900360200190f35b34801561028f57600080fd5b5061020d610bbc565b3480156102a457600080fd5b5061020d600480360360208110156102bb57600080fd5b5035610bc2565b3480156102ce57600080fd5b506102ec600480360360208110156102e557600080fd5b5035610be1565b604080519115158252519081900360200190f35b34801561030c57600080fd5b5061019f6004803603608081101561032357600080fd5b813591600160a060020a036020820135169181019060608101604082013564010000000081111561035357600080fd5b82018360208201111561036557600080fd5b8035906020019184602083028401116401000000008311171561038757600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156103d757600080fd5b8201836020820111156103e957600080fd5b8035906020019184602083028401116401000000008311171561040b57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550610bf8945050505050565b34801561045557600080fd5b5061019f6004803603604081101561046c57600080fd5b5080359060200135611052565b34801561048557600080fd5b506102676113e9565b34801561049a57600080fd5b5061020d600480360360408110156104b157600080fd5b50600160a060020a0381351690602001356113f8565b3480156104d357600080fd5b5061020d600480360360408110156104ea57600080fd5b5080359060200135611428565b34801561050357600080fd5b5061020d61143d565b34801561051857600080fd5b506105366004803603602081101561052f57600080fd5b5035611443565b604080519687526020870195909552858501939093526060850191909152600160a060020a0316608084015260ff1660a0830152519081900360c00190f35b34801561058157600080fd5b5061019f6004803603608081101561059857600080fd5b600160a060020a0382358116926020810135926040820135909216918101906080810160608201356401000000008111156105d257600080fd5b8201836020820111156105e457600080fd5b8035906020019184600183028401116401000000008311171561060657600080fd5b509092509050611498565b34801561061d57600080fd5b5061019f6004803603602081101561063457600080fd5b5035611537565b34801561064757600080fd5b5061020d6004803603602081101561065e57600080fd5b50356115f6565b61019f6004803603608081101561067b57600080fd5b813591600160a060020a03602082013516918101906060810160408201356401000000008111156106ab57600080fd5b8201836020820111156106bd57600080fd5b803590602001918460208302840111640100000000831117156106df57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929594936020810193503591505064010000000081111561072f57600080fd5b82018360208201111561074157600080fd5b8035906020019184602083028401116401000000008311171561076357600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550611608945050505050565b3480156107ad57600080fd5b5061019f61165a565b3480156107c257600080fd5b506102ec600480360360208110156107d957600080fd5b5035600160a060020a0316611665565b600154610100900460ff1680610802575061080261167d565b80610810575060015460ff16155b15156108505760405160e560020a62461bcd02815260040180806020018281038252602e815260200180611d4d602e913960400191505060405180910390fd5b6001805461010061ff00198216811760ff191683179092556034805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a03888116919091179092556035805490911691861691909117905560368390550460ff166108b8611683565b600180549115156101000261ff0019909216919091179055505050565b600082815260376020526040812080549091811161093d576040805160e560020a62461bcd02815260206004820152601160248201527f426f6e6420686173206e6f2076616c7565000000000000000000000000000000604482015290519081900360640190fd5b6000825560048201546003830154600160a060020a03909116331490156109985760405160e560020a62461bcd028152600401808060200182810382526021815260200180611dc86021913960400191505060405180910390fd5b8080610a0a57506040805160c0810182528454815260018501546020820152600285015491810191909152600384015460608201526004840154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a0820152610a0a9061168c565b1515610a60576040805160e560020a62461bcd02815260206004820181905260248201527f6f776e6572206f7220676f7665726e61626c652063616e207769746864726177604482015290519081900360640190fd5b8015610ac15760018301544211610ac1576040805160e560020a62461bcd02815260206004820152601460248201527f426f6e64206973207374696c6c20616374697665000000000000000000000000604482015290519081900360640190fd5b603454610ad890600160a060020a031685846116cc565b60408051868152600160a060020a038616602082015280820184905290517fc15103656f6b64cd545b27cff5200a514f316fafe20fdbecfb7369781fcd14359181900360600190a15050505050565b600160a060020a031660009081526039602052604090205490565b610b4b33611665565b1515610ba1576040805160e560020a62461bcd02815260206004820152601460248201527f4f6e6c7920476f7665726e6f7220416374696f6e000000000000000000000000604482015290519081900360640190fd5b610baa816117c3565b50565b603554600160a060020a031681565b603a5490565b603a805482908110610bd057fe5b600091825260209091200154905081565b600090815260376020526040902060010154421190565b60008481526037602052604090206004810154600160a060020a031633148080610c8857506040805160c0810182528354815260018401546020820152600284015491810191909152600383015460608201526004830154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a0820152610c889061168c565b1515610cde576040805160e560020a62461bcd02815260206004820152601d60248201527f6f776e6572206f7220676f7665726e61626c652063616e207374616b65000000604482015290519081900360640190fd5b6000805b8451811015610d1d57610d138582815181101515610cfc57fe5b60209081029091010151839063ffffffff61180b16565b9150600101610ce2565b506003830154610d33908263ffffffff61180b16565b6003840181905583541015610d92576040805160e560020a62461bcd02815260206004820152601960248201527f496e73756666696369656e7420626f6e642062616c616e636500000000000000604482015290519081900360640190fd5b6060878787876040516020018085815260200184600160a060020a0316600160a060020a031681526020018060200180602001838103835285818151815260200191508051906020019060200280838360005b83811015610dfd578181015183820152602001610de5565b50505050905001838103825284818151815260200191508051906020019060200280838360005b83811015610e3c578181015183820152602001610e24565b50505050905001965050505050505060405160208183030381529060405290506060600482604051602001808360ff16815260200180602001828103825283818151815260200191508051906020019080838360005b83811015610eaa578181015183820152602001610e92565b50505050905090810190601f168015610ed75780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152908290526034546035547fcae9ca51000000000000000000000000000000000000000000000000000000008452600160a060020a0390811660048501818152602486018d9052606060448701908152855160648801528551959b5092909316985063cae9ca51975095508a945088939192909160840190602085019080838360005b83811015610f7f578181015183820152602001610f67565b50505050905090810190601f168015610fac5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b158015610fcd57600080fd5b505af1158015610fe1573d6000803e3d6000fd5b505050506040513d6020811015610ff757600080fd5b5050604080518a8152336020820152600160a060020a038a16818301526060810185905290517f42e7044c4f07599463ab916896808dec08d53a4d63c09608065f9fa448d5ce829181900360800190a1505050505050505050565b603554604080517f1e23f2f9000000000000000000000000000000000000000000000000000000008152600481018490529051600092600160a060020a031691631e23f2f9916024808301926020929190829003018186803b1580156110b757600080fd5b505afa1580156110cb573d6000803e3d6000fd5b505050506040513d60208110156110e157600080fd5b5051905082811461113c576040805160e560020a62461bcd02815260206004820152601860248201527f5374616b65206e6565647320746f20626520626f6e6465640000000000000000604482015290519081900360640190fd5b603554604080517f5652c52f000000000000000000000000000000000000000000000000000000008152600481018590529051600092600160a060020a031691635652c52f9160248083019260e0929190829003018186803b1580156111a157600080fd5b505afa1580156111b5573d6000803e3d6000fd5b505050506040513d60e08110156111cb57600080fd5b50516000858152603760205260409020600481015491925090600160a060020a031633148061126057506040805160c0810182528254815260018301546020820152600283015491810191909152600382015460608201526004820154600160a060020a038116608083015274010000000000000000000000000000000000000000900460ff1660a08201526112609061168c565b15156112b6576040805160e560020a62461bcd02815260206004820152601f60248201527f6f776e6572206f7220676f7665726e61626c652063616e20756e7374616b6500604482015290519081900360640190fd5b60038101548211156112fc5760405160e560020a62461bcd028152600401808060200182810382526023815260200180611d2a6023913960400191505060405180910390fd5b6003810154611311908363ffffffff61181816565b6003820155603554604080517fd78b37ed00000000000000000000000000000000000000000000000000000000815260048101889052602481018790529051600160a060020a039092169163d78b37ed9160448082019260009290919082900301818387803b15801561138357600080fd5b505af1158015611397573d6000803e3d6000fd5b5050604080518881523360208201528082018890526060810186905290517f687f705929669882a184d4123148de163cc23c02682e756263a0259955ea3e789350908190036080019150a15050505050565b603454600160a060020a031681565b60396020528160005260406000208181548110151561141357fe5b90600052602060002001600091509150505481565b60006114363333858561182a565b9392505050565b60365481565b6037602052600090815260409020805460018201546002830154600384015460049094015492939192909190600160a060020a0381169074010000000000000000000000000000000000000000900460ff1686565b603454600160a060020a031633146114fa576040805160e560020a62461bcd02815260206004820152601b60248201527f43616c6c2066726f6d207468652063757272656e7420746f6b656e0000000000604482015290519081900360640190fd5b6000808383604081101561150d57600080fd5b50600160a060020a03813516925060200135905061152d8783888461182a565b5050505050505050565b61154033611665565b1515611596576040805160e560020a62461bcd02815260206004820152601460248201527f4f6e6c7920476f7665726e6f7220416374696f6e000000000000000000000000604482015290519081900360640190fd5b6301e1338081106115f1576040805160e560020a62461bcd02815260206004820152601560248201527f4d61782031207965617220676f7665726e61626c650000000000000000000000604482015290519081900360640190fd5b603655565b60386020526000908152604090205481565b600034111561164857604051600160a060020a038416903480156108fc02916000818181858888f19350505050158015611646573d6000803e3d6000fd5b505b61165484848484610bf8565b50505050565b61166333611ab0565b565b6000611677818363ffffffff611af816565b92915050565b303b1590565b611663336117c3565b60008061169833611665565b905060006116b5603654856040015161180b90919063ffffffff16565b42111590508180156116c45750805b949350505050565b82600160a060020a031663a9059cbb83836040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050600060405180830381600087803b15801561174857600080fd5b505af115801561175c573d6000803e3d6000fd5b50505050611768611b2f565b15156117be576040805160e560020a62461bcd02815260206004820152600d60248201527f7472616e73666572206661696c00000000000000000000000000000000000000604482015290519081900360640190fd5b505050565b6117d460008263ffffffff611b6316565b604051600160a060020a038216907fdc5a48d79e2e147530ff63ecdbed5a5a66adb9d5cf339384d5d076da197c40b590600090a250565b8181018281101561167757fe5b60008282111561182457fe5b50900390565b600061184042633864090063ffffffff61180b16565b82106118805760405160e560020a62461bcd028152600401808060200182810382526021815260200180611d7b6021913960400191505060405180910390fd5b611893426202a30063ffffffff61180b16565b82116118d35760405160e560020a62461bcd02815260040180806020018281038252602c815260200180611d9c602c913960400191505060405180910390fd5b60408051600160a060020a03861660208083019190915281830186905260608201859052436080808401919091528351808403909101815260a09092019092528051910120611920611ce6565b506040805160c081018252858152602080820186815242838501908152600060608501818152600160a060020a03808d166080880181815260a08901858152603a80548d885260388b528c88205560378a528b87208b51815598516001808b0191909155975160028a015594516003890155905160049097018054915160ff16740100000000000000000000000000000000000000000274ff00000000000000000000000000000000000000001998851673ffffffffffffffffffffffffffffffffffffffff19909316929092179790971617909555938252603985529581208054808401825590825293812090930186905584549081018555939091527fa2999d817b6757290b50e8ecf3fa939673403dd35c97de392fdb343b4015ce9e9092018390556034549091611a579116883088611bb1565b60408051838152600160a060020a03881660208201528082018790526060810186905290517f3db8638351f2d0f91f71603c1096c8170b9c1af65d6d548492a3857ba71fd6f99181900360800190a15095945050505050565b611ac160008263ffffffff611c9a16565b604051600160a060020a038216907f1ebe834e73d60a5fec822c1e1727d34bc79f2ad977ed504581cc1822fe20fb5b90600090a250565b6000600160a060020a0382161515611b0f57600080fd5b50600160a060020a03166000908152602091909152604090205460ff1690565b6000803d8015611b465760208114611b4f57611b5b565b60019150611b5b565b60206000803e60005191505b501515905090565b600160a060020a0381161515611b7857600080fd5b611b828282611af8565b15611b8c57600080fd5b600160a060020a0316600090815260209190915260409020805460ff19166001179055565b604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a0385811660048301528481166024830152604482018490529151918616916323b872dd9160648082019260009290919082900301818387803b158015611c2457600080fd5b505af1158015611c38573d6000803e3d6000fd5b50505050611c44611b2f565b1515611654576040805160e560020a62461bcd02815260206004820152601160248201527f7472616e7366657246726f6d206661696c000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a0381161515611caf57600080fd5b611cb98282611af8565b1515611cc457600080fd5b600160a060020a0316600090815260209190915260409020805460ff19169055565b60c060405190810160405280600081526020016000815260200160008152602001600081526020016000600160a060020a03168152602001600060ff168152509056fe43616e6e6f7420756e7374616b65206f76657220626f6e6420616c6c6f636174696f6e436f6e747261637420696e7374616e63652068617320616c7265616479206265656e20696e697469616c697a6564457870697279206d757374206265206c657373207468616e203330207965617273457870697279206d757374206265206174206c656173742032206461797320696e2074686520667574757265426f6e64206d7573742068617665206e6f20616c6c6f6361746564207374616b65a165627a7a7230582045ea09a7acc8ac9b9b1f7ca89445fa9c28196e826dcd10017ed4f6fe19b14ee70029",
  "sourceMap": "253:9147:14:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;253:9147:14;;;;;;;",
  "deployedSourceMap": "253:9147:14:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1705:292;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1705:292:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;;;;;1705:292:14;;;;;;;;;;;;;;;;;:::i;:::-;;4795:677;;8:9:-1;5:2;;;30:1;27;20:12;5:2;4795:677:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4795:677:14;;;;;;-1:-1:-1;;;;;4795:677:14;;:::i;9285:113::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;9285:113:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;9285:113:14;-1:-1:-1;;;;;9285:113:14;;:::i;:::-;;;;;;;;;;;;;;;;526:90:9;;8:9:-1;5:2;;;30:1;27;20:12;5:2;526:90:9;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;526:90:9;-1:-1:-1;;;;;526:90:9;;:::i;395:22:14:-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;395:22:14;;;:::i;:::-;;;;-1:-1:-1;;;;;395:22:14;;;;;;;;;;;;;;9074:83;;8:9:-1;5:2;;;30:1;27;20:12;5:2;9074:83:14;;;:::i;1414:22::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1414:22:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1414:22:14;;:::i;8473:149::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;8473:149:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;8473:149:14;;:::i;:::-;;;;;;;;;;;;;;;;;;5768:914;;8:9:-1;5:2;;;30:1;27;20:12;5:2;5768:914:14;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;5768:914:14;;;-1:-1:-1;;;;;5768:914:14;;;;;;;;;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;5768:914:14;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;5768:914:14;;;;;;101:9:-1;95:2;81:12;77:21;67:8;63:36;60:51;39:11;25:12;22:29;11:108;8:2;;;132:1;129;122:12;8:2;5768:914:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;5768:914:14;;;;;;;;-1:-1:-1;5768:914:14;;-1:-1:-1;;21:11;5:28;;2:2;;;46:1;43;36:12;2:2;5768:914:14;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;5768:914:14;;;;;;101:9:-1;95:2;81:12;77:21;67:8;63:36;60:51;39:11;25:12;22:29;11:108;8:2;;;132:1;129;122:12;8:2;5768:914:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;5768:914:14;;-1:-1:-1;5768:914:14;;-1:-1:-1;;;;;5768:914:14:i;7592:767::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;7592:767:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;7592:767:14;;;;;;;:::i;336:20::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;336:20:14;;;:::i;1360:48::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1360:48:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;;;;;1360:48:14;;;;;;;;:::i;2533:191::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2533:191:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;2533:191:14;;;;;;;:::i;454:28::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;454:28:14;;;:::i;1269:37::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1269:37:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1269:37:14;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1269:37:14;;;;;;;;;;;;;;;;;;;;2972:390;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2972:390:14;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;;;;;2972:390:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2972:390:14;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2972:390:14;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2972:390:14;;-1:-1:-1;2972:390:14;-1:-1:-1;2972:390:14;:::i;2127:198::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2127:198:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;2127:198:14;;:::i;1312:42::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1312:42:14;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1312:42:14;;:::i;7101:300::-;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;7101:300:14;;;-1:-1:-1;;;;;7101:300:14;;;;;;;;;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;7101:300:14;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;7101:300:14;;;;;;101:9:-1;95:2;81:12;77:21;67:8;63:36;60:51;39:11;25:12;22:29;11:108;8:2;;;132:1;129;122:12;8:2;7101:300:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;7101:300:14;;;;;;;;-1:-1:-1;7101:300:14;;-1:-1:-1;;21:11;5:28;;2:2;;;46:1;43;36:12;2:2;7101:300:14;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;7101:300:14;;;;;;101:9:-1;95:2;81:12;77:21;67:8;63:36;60:51;39:11;25:12;22:29;11:108;8:2;;;132:1;129;122:12;8:2;7101:300:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;7101:300:14;;-1:-1:-1;7101:300:14;;-1:-1:-1;;;;;7101:300:14:i;620:73:9:-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;620:73:9;;;:::i;418:104::-;;8:9:-1;5:2;;;30:1;27;20:12;5:2;418:104:9;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;418:104:9;-1:-1:-1;;;;;418:104:9;;:::i;1705:292:14:-;1024:12:29;;;;;;;;:31;;;1040:15;:13;:15::i;:::-;1024:47;;;-1:-1:-1;1060:11:29;;;;1059:12;1024:47;1016:106;;;;;;-1:-1:-1;;;;;1016:106:29;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1152:12;;;;-1:-1:-1;;1170:19:29;;;;-1:-1:-1;;1195:18:29;;;;;;1872:5:14;:14;;-1:-1:-1;;1872:14:14;;;-1:-1:-1;;;;;1872:14:14;;;;;;;;;;1896:7;:26;;;;;;;;;;;;;;1932:16;:36;;;1152:12:29;;;1978::14;:10;:12::i;:::-;1228::29;:30;;;;;;;-1:-1:-1;;1228:30:29;;;;;;;;;-1:-1:-1;;;1705:292:14:o;4795:677::-;4874:15;4892:12;;;:4;:12;;;;;4936:8;;4892:12;;4963:18;;4954:49;;;;;-1:-1:-1;;;;;4954:49:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;5024:1;5013:12;;5087:8;;;;5114:12;;;;-1:-1:-1;;;;;5087:8:14;;;5073:10;:22;;5114:17;5105:64;;;;-1:-1:-1;;;;;5105:64:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5188:7;:26;;;-1:-1:-1;5199:15:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;5199:15:14;;;;;;;;;;;;;;;;;:11;:15::i;:::-;5179:72;;;;;;;-1:-1:-1;;;;;5179:72:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5265:7;5261:94;;;5303:16;;;;5297:3;:22;5288:56;;;;;-1:-1:-1;;;;;5288:56:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;5383:5;;5364:45;;-1:-1:-1;;;;;5383:5:14;5390:2;5394:14;5364:18;:45::i;:::-;5425:40;;;;;;-1:-1:-1;;;;;5425:40:14;;;;;;;;;;;;;;;;;;;;;;;4795:677;;;;;:::o;9285:113::-;-1:-1:-1;;;;;9367:17:14;9344:4;9367:17;;;:10;:17;;;;;:24;;9285:113::o;526:90:9:-;355:22;366:10;355;:22::i;:::-;347:55;;;;;;;-1:-1:-1;;;;;347:55:9;;;;;;;;;;;;;;;;;;;;;;;;;;;;590:21;603:7;590:12;:21::i;:::-;526:90;:::o;395:22:14:-;;;-1:-1:-1;;;;;395:22:14;;:::o;9074:83::-;9138:5;:12;9074:83;:::o;1414:22::-;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1414:22:14;:::o;8473:149::-;8556:4;8583:12;;;:4;:12;;;;;:26;;;8612:3;-1:-1:-1;;8473:149:14:o;5768:914::-;5907:15;5925:12;;;:4;:12;;;;;5976:8;;;;-1:-1:-1;;;;;5976:8:14;5962:10;:22;;;6003:26;;-1:-1:-1;6014:15:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;6014:15:14;;;;;;;;;;;;;;;;;:11;:15::i;:::-;5994:69;;;;;;;-1:-1:-1;;;;;5994:69:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;6082:10;;6106:96;6127:7;:14;6123:1;:18;6106:96;;;6170:21;6180:7;6188:1;6180:10;;;;;;;;;;;;;;;;;;;6170:5;;:21;:9;:21;:::i;:::-;6162:29;-1:-1:-1;6143:3:14;;6106:96;;;-1:-1:-1;6226:12:14;;;;:23;;6243:5;6226:23;:16;:23;:::i;:::-;6211:12;;;:38;;;6285:8;;-1:-1:-1;6269:24:14;6260:63;;;;;-1:-1:-1;;;;;6260:63:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;6372:20;6406:6;6414:11;6427:7;6436;6395:49;;;;;;;;;;;-1:-1:-1;;;;;6395:49:14;-1:-1:-1;;;;;6395:49:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;90:11;;;84:18;71:11;;;64:39;52:2;45:10;8:100;;;12:14;6395:49:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;90:11;;;84:18;71:11;;;64:39;52:2;45:10;8:100;;;12:14;6395:49:14;;;;;;;;;;;;;;;;49:4:-1;39:7;30;26:21;22:32;13:7;6:49;6395::14;;;6372:72;;6454:23;6491:1;6494:7;6480:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;90:11;;;84:18;71:11;;;64:39;52:2;45:10;8:100;;;12:14;6480:22:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;6480:22:14;;;-1:-1:-1;;26:21;;;22:32;6:49;;6480:22:14;;;;6561:5;;6583:7;;6551:59;;;-1:-1:-1;;;;;6583:7:14;;;6551:59;;;;;;;;;;;;;;;;;;;;;;;;;;;6480:22;;-1:-1:-1;6561:5:14;;;;;-1:-1:-1;6551:31:14;;-1:-1:-1;6583:7:14;-1:-1:-1;6592:5:14;;-1:-1:-1;6480:22:14;;6551:59;;;;;;;49:4:-1;6551:59:14;;;;;;6561:5;8:100:-1;33:3;30:1;27:10;8:100;;;90:11;;;84:18;71:11;;;64:39;52:2;45:10;8:100;;;12:14;6551:59:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;6551:59:14;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;6551:59:14;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;6626:49:14;;;;;;6644:10;6551:59;6626:49;;;-1:-1:-1;;;;;6626:49:14;;;;;;;;;;;;;;;;;;;;;;;5768:914;;;;;;;;;:::o;7592:767::-;7718:7;;7699:50;;;;;;;;;;;;;;7677:19;;-1:-1:-1;;;;;7718:7:14;;7699:39;;:50;;;;;;;;;;;;;;7718:7;7699:50;;;5:2:-1;;;;30:1;27;20:12;5:2;7699:50:14;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;7699:50:14;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;7699:50:14;;-1:-1:-1;7767:21:14;;;7759:58;;;;;-1:-1:-1;;;;;7759:58:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;7869:7;;7850:48;;;;;;;;;;;;;;7829:11;;-1:-1:-1;;;;;7869:7:14;;7850:37;;:48;;;;;;;;;;;;;;7869:7;7850:48;;;5:2:-1;;;;30:1;27;20:12;5:2;7850:48:14;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;7850:48:14;;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;7850:48:14;7908:15;7926:12;;;:4;7850:48;7926:12;7850:48;7926:12;;7971:8;;;;7850:48;;-1:-1:-1;7926:12:14;-1:-1:-1;;;;;7971:8:14;7957:10;:22;;:41;;-1:-1:-1;7983:15:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;7983:15:14;;;;;;;;;;;;;;;;;:11;:15::i;:::-;7948:86;;;;;;;-1:-1:-1;;;;;7948:86:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;8061:12;;;;:22;-1:-1:-1;8061:22:14;8053:70;;;;-1:-1:-1;;;;;8053:70:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8148:12;;;;:24;;8165:6;8148:24;:16;:24;:::i;:::-;8133:12;;;:39;8245:7;;8226:60;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;8245:7:14;;;;8226:41;;:60;;;;;8245:7;;8226:60;;;;;;;;8245:7;;8226:60;;;5:2:-1;;;;30:1;27;20:12;5:2;8226:60:14;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;-1:-1;;8302:50:14;;;;;;8322:10;8302:50;;;;;;;;;;;;;;;;;;;;-1:-1:-1;8302:50:14;;;;;;;-1:-1:-1;8302:50:14;7592:767;;;;;:::o;336:20::-;;;-1:-1:-1;;;;;336:20:14;;:::o;1360:48::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;2533:191::-;2625:7;2655:62;2667:10;2679;2691:9;2702:14;2655:11;:62::i;:::-;2648:69;2533:191;-1:-1:-1;;;2533:191:14:o;454:28::-;;;;:::o;1269:37::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1269:37:14;;;;;;;;;:::o;2972:390::-;3163:5;;-1:-1:-1;;;;;3163:5:14;3149:10;:19;3140:60;;;;;-1:-1:-1;;;;;3140:60:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;3211:19;3232:15;3262:10;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;;;;;3251:39:14;;;;-1:-1:-1;3251:39:14;;;;-1:-1:-1;3301:54:14;3313:8;3251:39;3336:6;3251:39;3301:11;:54::i;:::-;;2972:390;;;;;;;:::o;2127:198::-;355:22:9;366:10;355;:22::i;:::-;347:55;;;;;;;-1:-1:-1;;;;;347:55:9;;;;;;;;;;;;;;;;;;;;;;;;;;;;2246:8:14;2234:20;;2225:55;;;;;-1:-1:-1;;;;;2225:55:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;2290:16;:28;2127:198::o;1312:42::-;;;;;;;;;;;;;:::o;7101:300::-;7282:1;7270:9;:13;7266:75;;;7299:31;;-1:-1:-1;;;;;7299:20:14;;;7320:9;7299:31;;;;;;;;;7320:9;7299:20;:31;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;7299:31:14;7266:75;7350:44;7356:6;7364:11;7377:7;7386;7350:5;:44::i;:::-;7101:300;;;;:::o;620:73:9:-;661:27;677:10;661:15;:27::i;:::-;620:73::o;418:104::-;476:4;495:22;476:4;509:7;495:22;:13;:22;:::i;:::-;488:29;418:104;-1:-1:-1;;418:104:9:o;1349:467:29:-;1782:7;1770:20;1804:7;1349:467;:::o;245:68:9:-;284:24;297:10;284:12;:24::i;8754:252:14:-;8838:4;8859:10;8872:22;8883:10;8872;:22::i;:::-;8859:35;;8904:14;8928:36;8947:16;;8928:2;:14;;;:18;;:36;;;;:::i;:::-;8921:3;:43;;8904:60;;8981:5;:18;;;;;8990:9;8981:18;8974:25;8754:252;-1:-1:-1;;;;8754:252:14:o;928:162:25:-;1015:5;-1:-1:-1;;;;;1002:28:25;;1031:2;1035:6;1002:40;;;;;;;;;;;;;-1:-1:-1;;;;;1002:40:25;-1:-1:-1;;;;;1002:40:25;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1002:40:25;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1002:40:25;;;;1054:14;:12;:14::i;:::-;1046:40;;;;;;;-1:-1:-1;;;;;1046:40:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;928:162;;;:::o;697:114:9:-;751:22;:9;765:7;751:22;:13;:22;:::i;:::-;784;;-1:-1:-1;;;;;784:22:9;;;;;;;;697:114;:::o;1345:142:30:-;1430:7;;;1454;;;;1447:15;;;1149:126;1209:7;1235:8;;;;1228:16;;;;-1:-1:-1;1261:7:30;;;1149:126::o;3564:900:14:-;3687:7;3736:18;:3;3744:9;3736:18;:7;:18;:::i;:::-;3719:35;;3710:82;;;;-1:-1:-1;;;;;3710:82:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3828:15;:3;3836:6;3828:15;:7;:15;:::i;:::-;3811:32;;3802:90;;;;-1:-1:-1;;;;;3802:90:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3929:55;;;-1:-1:-1;;;;;3929:55:14;;;;;;;;;;;;;;;;;;;;;;3971:12;3929:55;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;3929:55:14;;;;;;;3919:66;;;;;3995:14;;:::i;:::-;-1:-1:-1;4012:140:14;;;;;;;;;;;;;;;;;;4081:15;4012:140;;;;;;-1:-1:-1;4012:140:14;;;;;;-1:-1:-1;;;;;4012:140:14;;;;;;;;;;;;;;;4182:5;:12;;4162:17;;;:9;:17;;;;;:32;4204:4;:12;;;;;:17;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4012:140;4204:17;;;-1:-1:-1;;4204:17:14;;;-1:-1:-1;;4204:17:14;;;;;;;;;;;;;;;4231:14;;;:10;:14;;;;;27:10:-1;;23:18;;;45:23;;4231:27:14;;;;;;;;;;;;27:10:-1;;23:18;;;45:23;;4268:18:14;;;;;;;;;;;4328:5;;4012:140;;4305:64;;4328:5;4335:7;4352:4;4030:9;4305:22;:64::i;:::-;4384:50;;;;;;-1:-1:-1;;;;;4384:50:14;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;4451:6:14;3564:900;-1:-1:-1;;;;;3564:900:14:o;815:122:9:-;872:25;:9;889:7;872:25;:16;:25;:::i;:::-;908:24;;-1:-1:-1;;;;;908:24:9;;;;;;;;815:122;:::o;732:166:10:-;816:4;-1:-1:-1;;;;;838:21:10;;;;830:30;;;;;;-1:-1:-1;;;;;;873:20:10;:11;:20;;;;;;;;;;;;;;;732:166::o;339:586:25:-;391:4;;512:14;571:36;;;;660:4;655:163;;;;505:385;;571:36;601:1;586:16;;571:36;;655:163;736:4;731:3;726;711:30;809:3;803:10;788:25;;505:385;-1:-1:-1;905:16:25;;;-1:-1:-1;339:586:25;:::o;251:167:10:-;-1:-1:-1;;;;;323:21:10;;;;315:30;;;;;;360:18;364:4;370:7;360:3;:18::i;:::-;359:19;351:28;;;;;;-1:-1:-1;;;;;386:20:10;:11;:20;;;;;;;;;;;:27;;-1:-1:-1;;386:27:10;409:4;386:27;;;251:167::o;1093:194:25:-;1185:50;;;;;;-1:-1:-1;;;;;1185:50:25;;;;;;;;;;;;;;;;;;;;;;:32;;;;;;:50;;;;;-1:-1:-1;;1185:50:25;;;;;;;;-1:-1:-1;1185:32:25;:50;;;5:2:-1;;;;30:1;27;20:12;5:2;1185:50:25;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1185:50:25;;;;1247:14;:12;:14::i;:::-;1239:44;;;;;;;-1:-1:-1;;;;;1239:44:25;;;;;;;;;;;;;;;;;;;;;;;;;;;484:170:10;-1:-1:-1;;;;;559:21:10;;;;551:30;;;;;;595:18;599:4;605:7;595:3;:18::i;:::-;587:27;;;;;;;;-1:-1:-1;;;;;621:20:10;644:5;621:20;;;;;;;;;;;:28;;-1:-1:-1;;621:28:10;;;484:170::o;253:9147:14:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;253:9147:14;;;;;;;;;;;;:::o",
  "source": "pragma solidity >=0.5.0 <0.6.0;\n\nimport \"./XyStakingConsensus.sol\";\nimport \"../utils/SafeMath.sol\";\nimport \"../token/ERC20/SafeERC20.sol\";\nimport \"../token/ERC20/IXYOERC20.sol\";\nimport \"../utils/Initializable.sol\";\nimport \"../access/GovernorRole.sol\";\n\ncontract XyBond is GovernorRole, Initializable {\n    using SafeMath for uint;\n\n    address public erc20;         // the token for staking\n    address public staking;       // node-staking contract\n    uint public governablePeriod; // seconds after bond creation it's governable\n\n    event BondDeposit(bytes32 bondId, address beneficiary, uint amount, uint expiration);\n    event BondWithdraw(bytes32 bondId, address beneficiary, uint amount);\n    event BondStake(bytes32 bondId, address sender, address beneficiary, uint amount);\n    event BondUnstake(bytes32 bondId, address sender, bytes32 stakingId, uint amount);\n\n    struct Bond {\n        uint value;             // amount staked\n        uint expirationSec;     // expiration date in seconds\n        uint creationSec;       // creation date in seconds\n        uint allocated;         // number allocated to node stake\n        address owner;          // who owns the stake\n        uint8 interest;         // possibly add interest or relationship here\n    }\n\n    mapping (bytes32 => Bond) public bond;\n    mapping (bytes32 => uint) public bondIndex;\n    mapping (address => bytes32[]) public ownerBonds;\n    bytes32[] public bonds;\n\n    /**\n        initializes upgradeable contract\n        @param _token the token to stake\n        @param _stakingContract the contract used for staking \n        @param _governablePeriod the period a governor can revoke bonded stake (chargeback avoidance)\n    */\n    function initialize (\n        address _token,\n        address _stakingContract,\n        uint _governablePeriod\n    )\n        initializer \n        public\n    {\n        erc20 = _token;\n        staking = _stakingContract;\n        governablePeriod = _governablePeriod;\n        super.init();\n    }\n\n    /**\n        Update period a bond is governable\n        @param newPeriod the new static period we allow to revoke\n    */\n    function setGovernablePeriod(uint newPeriod) \n        public \n        onlyGovernor \n    {\n        require (newPeriod < 31536000, \"Max 1 year governable\");\n        governablePeriod = newPeriod;\n    }\n\n    /**\n        Create a bonded (network stake)\n        Sender must approve before bond can be created\n        @param xyoAmount amount to bond\n        @param expirationDate date the bond expires\n    */\n    function createBond (uint xyoAmount, uint expirationDate) \n        public \n        returns (bytes32)\n    {\n        return _createBond(msg.sender, msg.sender, xyoAmount, expirationDate);\n    }\n\n    /**\n        Called from erc20 token that allows approval and calling function in a single call\n        @param _spender who approved the token\n        @param _value amount approved\n        @param _extraData contains expiration date\n    */\n    function receiveApproval(\n        address _spender, \n        uint256 _value, \n        address,\n        bytes calldata _extraData\n    ) \n        external \n    {\n        require (msg.sender == erc20, \"Call from the current token\");\n        (address beneficiary, uint expireDate) = abi.decode(_extraData, (address, uint));\n\n        _createBond(_spender, beneficiary, _value, expireDate);\n    }\n\n    /**\n        Creates a bond to 'to' for 'xyoAmount' until 'expirationDate'\n        @param to who receives bond\n        @param xyoAmount how much\n        @param expirationDate until when\n    */\n    function _createBond (address spender, address to, uint xyoAmount, uint expirationDate) \n        private \n        returns (bytes32)\n    {\n        require (expirationDate < now.add(946080000), \"Expiry must be less than 30 years\");\n        require (expirationDate > now.add(172800), \"Expiry must be at least 2 days in the future\");\n        bytes32 bondId = keccak256(abi.encode(to, xyoAmount, expirationDate, block.number));\n        Bond memory ns = Bond(\n            xyoAmount,\n            expirationDate,\n            block.timestamp,\n            0,\n            to,\n            0\n        );\n        bondIndex[bondId] = bonds.length;\n        bond[bondId] = ns;\n        ownerBonds[to].push(bondId);\n        bonds.push(bondId);\n        \n        SafeERC20.transferFrom(erc20, spender, address(this), xyoAmount);\n        emit BondDeposit(bondId, to, xyoAmount, expirationDate);\n        return bondId;\n    }\n\n    /**\n        Withdraws an expired or governed bond's value to 'to'\n        Prerequisites: Bond must be entirely unstaked. Sender is owner or bond is governable.  Bond cannot be already emptied\n        @param bondId the bond id\n        @param to who receives the withdrawl\n        sender - owner of bond or governor\n    */\n    function withdrawTo (bytes32 bondId, address to) \n        public\n    {\n        Bond storage bs = bond[bondId];\n        uint withdrawAmount = bs.value;\n        require (withdrawAmount > 0, \"Bond has no value\");\n        bs.value = 0; // erase value of bond\n        bool isOwner = msg.sender == bs.owner;\n        require (bs.allocated == 0, \"Bond must have no allocated stake\");\n        require (isOwner || _governable(bs), \"owner or governable can withdraw\");\n        if (isOwner) {\n            require (now > bs.expirationSec, \"Bond is still active\");\n        }\n        SafeERC20.transfer(erc20, to, withdrawAmount);\n\n        emit BondWithdraw(bondId, to, withdrawAmount);\n    }\n\n    /**\n        Add node stakes associated from this bond.\n        @param bondId Id of the bond to use for node stake\n        @param beneficiary who will own the stakeid\n        @param stakees which stakees to create stake for\n        @param amounts which amounts to use for stakees\n    */\n    function stake (bytes32 bondId, address payable beneficiary, address[] memory stakees, uint[] memory amounts)\n        public\n    {\n        Bond storage bs = bond[bondId];\n        bool isOwner = msg.sender == bs.owner;\n        require (isOwner || _governable(bs), \"owner or governable can stake\");\n        \n        uint total = 0;\n        for (uint i = 0; i < amounts.length; i++) {\n            total = total.add(amounts[i]);\n        }\n        bs.allocated = bs.allocated.add(total);\n\n        require (bs.allocated <= bs.value, \"Insufficient bond balance\");\n\n        // stake stakees with amounts\n        bytes memory encoded = abi.encode(bondId, beneficiary, stakees, amounts);\n        bytes memory methodData = abi.encode(4, encoded);\n        \n        // stake bonded nodes\n        IXYOERC20(erc20).approveAndCall(staking, total, methodData);\n\n        emit BondStake(bondId, msg.sender, beneficiary, total);\n    }\n\n     /**\n        Helper for onboarding user with ETH and adding node stakes associated to their bond.\n        @param bondId Id of the bond to use for node stake\n        @param beneficiary who will own the stakeid\n        @param stakees which stakees to create stake for\n        @param amounts which amounts to use for stakees\n        msg.value send with some value to transfer eth to user in a single call\n    */\n    function sendEthAndStake(bytes32 bondId, address payable beneficiary, address[] memory stakees, uint[] memory amounts) \n        public\n        payable\n    {\n        if (msg.value > 0) {\n            beneficiary.transfer(msg.value);\n        }\n        stake(bondId, beneficiary, stakees, amounts);\n    }\n\n    /**\n        Called by owner or governable to unstake bonded node-stake\n        @param bondId The bond to unstake\n        @param stakingId the id of the associated node-stake\n    */\n    function unstake (bytes32 bondId, bytes32 stakingId) \n        public  \n    {\n        bytes32 checkBondId = XyStakingConsensus(staking).bondedStake(stakingId);\n        require(checkBondId == bondId, \"Stake needs to be bonded\");\n\n        (uint amount,,,,,,) = XyStakingConsensus(staking).stakeData(stakingId);\n        Bond storage bs = bond[bondId];\n        require (msg.sender == bs.owner || _governable(bs), \"owner or governable can unstake\");\n        \n        require(bs.allocated >= amount, \"Cannot unstake over bond allocation\");\n        bs.allocated = bs.allocated.sub(amount);\n\n        // will fail if already withdrew  \n        XyStakingConsensus(staking).unstakeBonded(bondId, stakingId);\n\n        emit BondUnstake(bondId, msg.sender, stakingId, amount);\n    }\n\n    /**\n        Helper to know if bond is expired\n        @param bondId which bond are we looking at\n    */\n    function isExpired(bytes32 bondId) \n        public \n        view \n        returns (bool)\n    {\n        return bond[bondId].expirationSec < now;\n    }\n\n    /** \n        True if the governable period has not elapsed since the bond creation\n        @param bs bond to check\n    */\n    function _governable(Bond memory bs) \n        private\n        view\n        returns (bool) \n    {\n        bool isGov = isGovernor(msg.sender);\n        bool govActive = now <= bs.creationSec.add(governablePeriod);\n        return isGov && govActive;\n    }\n\n\n    /** \n        Returns total count of bonds created\n    */\n    function numBonds() public view returns (uint) {\n        return bonds.length;\n    }\n\n    /** \n        Returns the total count of bonds created by owner\n        @param owner count bonds of this hodler\n    */\n    function numOwnerBonds(address owner) public view returns (uint) {\n        return ownerBonds[owner].length;\n    }\n}",
  "compiler": {
    "name": "solc",
    "version": "0.5.4+commit.9549d8ff.Emscripten.clang"
  },
  "networks": {
    "1": {
      "links": {},
      "events": {},
      "address": "0x1a024A698EEBdB86ccf3fCaF2F589839bdc066AD",
      "updated_at": 1556661531604,
      "transactionHash": "0x255625cc93e20aa5f6e318d7b1147a7db5aa810b038248f76b2279329f330581"
    },
    "42": {
      "links": {},
      "events": {},
      "address": "0xAB0245d3971E5E01C4E5273350B5cB9CBe46aA8B",
      "updated_at": 1556661257268,
      "transactionHash": "0x999f182e22c8bd166b5489789a8cc9a208447d3364a2be4eb0f699352ea2b192"
    }
  },
  "schemaVersion": "3.0.8",
  "updatedAt": "2019-05-02T01:23:44.841Z",
  "devdoc": {
    "methods": {
      "createBond(uint256,uint256)": {
        "params": {
          "expirationDate": "date the bond expires",
          "xyoAmount": "amount to bond"
        }
      },
      "initialize(address,address,uint256)": {
        "params": {
          "_governablePeriod": "the period a governor can revoke bonded stake (chargeback avoidance)",
          "_stakingContract": "the contract used for staking ",
          "_token": "the token to stake"
        }
      },
      "isExpired(bytes32)": {
        "params": {
          "bondId": "which bond are we looking at"
        }
      },
      "numOwnerBonds(address)": {
        "params": {
          "owner": "count bonds of this hodler"
        }
      },
      "receiveApproval(address,uint256,address,bytes)": {
        "params": {
          "_extraData": "contains expiration date",
          "_spender": "who approved the token",
          "_value": "amount approved"
        }
      },
      "sendEthAndStake(bytes32,address,address[],uint256[])": {
        "params": {
          "amounts": "which amounts to use for stakees msg.value send with some value to transfer eth to user in a single call",
          "beneficiary": "who will own the stakeid",
          "bondId": "Id of the bond to use for node stake",
          "stakees": "which stakees to create stake for"
        }
      },
      "setGovernablePeriod(uint256)": {
        "params": {
          "newPeriod": "the new static period we allow to revoke"
        }
      },
      "stake(bytes32,address,address[],uint256[])": {
        "params": {
          "amounts": "which amounts to use for stakees",
          "beneficiary": "who will own the stakeid",
          "bondId": "Id of the bond to use for node stake",
          "stakees": "which stakees to create stake for"
        }
      },
      "unstake(bytes32,bytes32)": {
        "params": {
          "bondId": "The bond to unstake",
          "stakingId": "the id of the associated node-stake"
        }
      },
      "withdrawTo(bytes32,address)": {
        "params": {
          "bondId": "the bond id",
          "to": "who receives the withdrawl sender - owner of bond or governor"
        }
      }
    }
  },
  "userdoc": {
    "methods": {
      "createBond(uint256,uint256)": {
        "notice": "Create a bonded (network stake) Sender must approve before bond can be created"
      },
      "initialize(address,address,uint256)": {
        "notice": "initializes upgradeable contract"
      },
      "isExpired(bytes32)": {
        "notice": "Helper to know if bond is expired"
      },
      "numBonds()": {
        "notice": "Returns total count of bonds created"
      },
      "numOwnerBonds(address)": {
        "notice": "Returns the total count of bonds created by owner"
      },
      "receiveApproval(address,uint256,address,bytes)": {
        "notice": "Called from erc20 token that allows approval and calling function in a single call"
      },
      "sendEthAndStake(bytes32,address,address[],uint256[])": {
        "notice": "Helper for onboarding user with ETH and adding node stakes associated to their bond."
      },
      "setGovernablePeriod(uint256)": {
        "notice": "Update period a bond is governable"
      },
      "stake(bytes32,address,address[],uint256[])": {
        "notice": "Add node stakes associated from this bond."
      },
      "unstake(bytes32,bytes32)": {
        "notice": "Called by owner or governable to unstake bonded node-stake"
      },
      "withdrawTo(bytes32,address)": {
        "notice": "Withdraws an expired or governed bond's value to 'to' Prerequisites: Bond must be entirely unstaked. Sender is owner or bond is governable.  Bond cannot be already emptied"
      }
    }
  }
}